{"version":3,"file":"matriculas-CUN1skwu.js","names":[],"sources":["../src/schema/matriculas.ts"],"sourcesContent":["import {\n  pgTable,\n  text,\n  timestamp,\n  integer,\n  boolean,\n  pgEnum,\n} from \"drizzle-orm/pg-core\";\n\nexport const statusMatriculaEnum = pgEnum(\"status_matricula\", [\n  \"pre\",\n  \"pendente_doc\",\n  \"completo\",\n  \"concluido\",\n]);\nexport const tipoDocumentoEnum = pgEnum(\"tipo_documento\", [\n  \"certidao\",\n  \"rg_cpf_resp\",\n  \"vacina\",\n  \"residencia\",\n  \"historico\",\n  \"foto3x4\",\n]);\nexport const statusDocumentoEnum = pgEnum(\"status_documento\", [\n  \"pendente\",\n  \"anexado\",\n  \"aprovado\",\n]);\nexport const etapaEnum = pgEnum(\"etapa\", [\n  \"bercario\",\n  \"maternal\",\n  \"pre_escola\",\n  \"fundamental\",\n]);\nexport const turnoEnum = pgEnum(\"turno\", [\"manha\", \"tarde\", \"integral\"]);\n\nexport const aluno = pgTable(\"aluno\", {\n  id: text(\"id\").primaryKey(),\n  idGlobal: text(\"id_global\").unique(),\n  nome: text(\"nome\").notNull(),\n  dataNascimento: timestamp(\"data_nascimento\").notNull(),\n  etapa: etapaEnum(\"etapa\").notNull(),\n  status: statusMatriculaEnum(\"status\").notNull().default(\"pre\"),\n  necessidadesEspeciais: boolean(\"necessidades_especiais\")\n    .notNull()\n    .default(false),\n  observacoes: text(\"observacoes\"),\n  rg: text(\"rg\"),\n  cpf: text(\"cpf\"),\n  naturalidade: text(\"naturalidade\"),\n  nacionalidade: text(\"nacionalidade\"),\n  sexo: text(\"sexo\"),\n  corRaca: text(\"cor_raca\"),\n  tipoSanguineo: text(\"tipo_sanguineo\"),\n  alergias: text(\"alergias\"),\n  medicamentos: text(\"medicamentos\"),\n  doencas: text(\"doencas\"),\n  carteiraVacina: boolean(\"carteira_vacina\").default(false),\n  observacoesSaude: text(\"observacoes_saude\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const responsavel = pgTable(\"responsavel\", {\n  id: text(\"id\").primaryKey(),\n  idGlobal: text(\"id_global\").unique(),\n  nome: text(\"nome\").notNull(),\n  cpf: text(\"cpf\").notNull().unique(),\n  telefone: text(\"telefone\").notNull(),\n  endereco: text(\"endereco\").notNull(),\n  bairro: text(\"bairro\").notNull(),\n  email: text(\"email\"),\n  parentesco: text(\"parentesco\").notNull().default(\"pai\"),\n  autorizadoRetirada: boolean(\"autorizado_retirada\").notNull().default(true),\n  rg: text(\"rg\"),\n  dataNascimento: timestamp(\"data_nascimento\"),\n  naturalidade: text(\"naturalidade\"),\n  nacionalidade: text(\"nacionalidade\"),\n  sexo: text(\"sexo\"),\n  estadoCivil: text(\"estado_civil\"),\n  profissao: text(\"profissao\"),\n  localTrabalho: text(\"local_trabalho\"),\n  telefoneTrabalho: text(\"telefone_trabalho\"),\n  contatoEmergencia: text(\"contato_emergencia\"),\n  telefoneEmergencia: text(\"telefone_emergencia\"),\n  parentescoEmergencia: text(\"parentesco_emergencia\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const turma = pgTable(\"turma\", {\n  id: text(\"id\").primaryKey(),\n  idGlobal: text(\"id_global\").unique(),\n  etapa: etapaEnum(\"etapa\").notNull(),\n  turno: turnoEnum(\"turno\").notNull(),\n  capacidade: integer(\"capacidade\").notNull(),\n  vagasDisponiveis: integer(\"vagas_disponiveis\").notNull(),\n  anoLetivo: text(\"ano_letivo\").notNull(),\n  nome: text(\"nome\").notNull(),\n  ativa: boolean(\"ativa\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const matricula = pgTable(\"matricula\", {\n  id: text(\"id\").primaryKey(),\n  idGlobal: text(\"id_global\").unique(),\n  protocoloLocal: text(\"protocolo_local\").notNull().unique(),\n  alunoId: text(\"aluno_id\")\n    .notNull()\n    .references(() => aluno.id, { onDelete: \"cascade\" }),\n  responsavelId: text(\"responsavel_id\")\n    .notNull()\n    .references(() => responsavel.id, { onDelete: \"cascade\" }),\n  turmaId: text(\"turma_id\").references(() => turma.id, {\n    onDelete: \"set null\",\n  }),\n  status: statusMatriculaEnum(\"status\").notNull().default(\"pre\"),\n  dataMatricula: timestamp(\"data_matricula\"),\n  observacoes: text(\"observacoes\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const documento = pgTable(\"documento\", {\n  id: text(\"id\").primaryKey(),\n  matriculaId: text(\"matricula_id\")\n    .notNull()\n    .references(() => matricula.id, { onDelete: \"cascade\" }),\n  tipo: tipoDocumentoEnum(\"tipo\").notNull(),\n  status: statusDocumentoEnum(\"status\").notNull().default(\"pendente\"),\n  arquivoUrl: text(\"arquivo_url\"),\n  nomeArquivo: text(\"nome_arquivo\"),\n  tamanhoArquivo: integer(\"tamanho_arquivo\"),\n  observacoes: text(\"observacoes\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const contatoEmergencia = pgTable(\"contato_emergencia\", {\n  id: text(\"id\").primaryKey(),\n  matriculaId: text(\"matricula_id\")\n    .notNull()\n    .references(() => matricula.id, { onDelete: \"cascade\" }),\n  nome: text(\"nome\").notNull(),\n  telefone: text(\"telefone\").notNull(),\n  parentesco: text(\"parentesco\").notNull(),\n  observacoes: text(\"observacoes\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const pendencia = pgTable(\"pendencia\", {\n  id: text(\"id\").primaryKey(),\n  matriculaId: text(\"matricula_id\")\n    .notNull()\n    .references(() => matricula.id, { onDelete: \"cascade\" }),\n  documentoId: text(\"documento_id\").references(() => documento.id, {\n    onDelete: \"set null\",\n  }),\n  descricao: text(\"descricao\").notNull(),\n  prazo: timestamp(\"prazo\"),\n  resolvido: boolean(\"resolvido\").notNull().default(false),\n  dataResolucao: timestamp(\"data_resolucao\"),\n  observacoes: text(\"observacoes\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n"],"mappings":"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"}